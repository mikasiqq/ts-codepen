{"ast":null,"code":"export const unpkgPathPlugin = () => {\n  return {\n    name: \"unpkg-path-plugin\",\n    setup(build) {\n      // handling root entry file of index.js\n      build.onResolve({\n        filter: /(^index\\.js$)/\n      }, () => {\n        return {\n          path: \"index.js\",\n          namespace: \"a\"\n        };\n      });\n\n      // handling relative paths\n      build.onResolve({\n        filter: /^\\.+\\//\n      }, args => {\n        return {\n          namespace: \"a\",\n          path: new URL(args.path, \"https://unpkg.com\" + args.resolveDir + \"/\").href\n        };\n      });\n\n      // handling main file\n      build.onResolve({\n        filter: /.*/\n      }, async args => {\n        return {\n          namespace: \"a\",\n          path: `https://unpkg.com/${args.path}`\n        };\n      });\n    }\n  };\n};","map":{"version":3,"names":["unpkgPathPlugin","name","setup","build","onResolve","filter","path","namespace","args","URL","resolveDir","href"],"sources":["/Users/gleb/Desktop/study/react/ts-prod/ts-codepen/packages/local-client/src/bundler/plugins/UnpkgPathPlugin.ts"],"sourcesContent":["import * as esbuild from \"esbuild-wasm\";\n\nexport const unpkgPathPlugin = () => {\n  return {\n    name: \"unpkg-path-plugin\",\n    setup(build: esbuild.PluginBuild) {\n      // handling root entry file of index.js\n      build.onResolve({ filter: /(^index\\.js$)/ }, () => {\n        return { path: \"index.js\", namespace: \"a\" };\n      });\n\n      // handling relative paths\n      build.onResolve({ filter: /^\\.+\\// }, (args: any) => {\n        return {\n          namespace: \"a\",\n          path: new URL(args.path, \"https://unpkg.com\" + args.resolveDir + \"/\")\n            .href,\n        };\n      });\n\n      // handling main file\n      build.onResolve({ filter: /.*/ }, async (args: any) => {\n        return {\n          namespace: \"a\",\n          path: `https://unpkg.com/${args.path}`,\n        };\n      });\n\n    },\n  };\n};\n"],"mappings":"AAEA,OAAO,MAAMA,eAAe,GAAG,MAAM;EACnC,OAAO;IACLC,IAAI,EAAE,mBAAmB;IACzBC,KAAK,CAACC,KAA0B,EAAE;MAChC;MACAA,KAAK,CAACC,SAAS,CAAC;QAAEC,MAAM,EAAE;MAAgB,CAAC,EAAE,MAAM;QACjD,OAAO;UAAEC,IAAI,EAAE,UAAU;UAAEC,SAAS,EAAE;QAAI,CAAC;MAC7C,CAAC,CAAC;;MAEF;MACAJ,KAAK,CAACC,SAAS,CAAC;QAAEC,MAAM,EAAE;MAAS,CAAC,EAAGG,IAAS,IAAK;QACnD,OAAO;UACLD,SAAS,EAAE,GAAG;UACdD,IAAI,EAAE,IAAIG,GAAG,CAACD,IAAI,CAACF,IAAI,EAAE,mBAAmB,GAAGE,IAAI,CAACE,UAAU,GAAG,GAAG,CAAC,CAClEC;QACL,CAAC;MACH,CAAC,CAAC;;MAEF;MACAR,KAAK,CAACC,SAAS,CAAC;QAAEC,MAAM,EAAE;MAAK,CAAC,EAAE,MAAOG,IAAS,IAAK;QACrD,OAAO;UACLD,SAAS,EAAE,GAAG;UACdD,IAAI,EAAG,qBAAoBE,IAAI,CAACF,IAAK;QACvC,CAAC;MACH,CAAC,CAAC;IAEJ;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module"}