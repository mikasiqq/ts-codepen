{"ast":null,"code":"import * as esbuild from \"esbuild-wasm\";\nimport { unpkgPathPlugin } from \"./plugins/UnpkgPathPlugin\";\nimport { fetchPlugin } from \"./plugins/FetchPlugin\";\nlet service;\nconst bundle = async rawCode => {\n  if (!service) {\n    service = await esbuild.startService({\n      worker: true,\n      wasmURL: \"https://unpkg.com/esbuild-wasm@0.8.27/esbuild.wasm\"\n    });\n  }\n  const result = await service.build({\n    entryPoints: [\"index.js\"],\n    bundle: true,\n    write: false,\n    plugins: [unpkgPathPlugin(), fetchPlugin(rawCode)],\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n      global: \"window\"\n    }\n  });\n  return result.outputFiles[0].text;\n};\nexport default bundle;","map":{"version":3,"names":["esbuild","unpkgPathPlugin","fetchPlugin","service","bundle","rawCode","startService","worker","wasmURL","result","build","entryPoints","write","plugins","define","global","outputFiles","text"],"sources":["/Users/gleb/Desktop/study/react/ts-codepen/src/bundler/index.ts"],"sourcesContent":["import * as esbuild from \"esbuild-wasm\";\nimport { unpkgPathPlugin } from \"./plugins/UnpkgPathPlugin\";\nimport { fetchPlugin } from \"./plugins/FetchPlugin\";\n\nlet service: esbuild.Service;\nconst bundle = async (rawCode: string) => {\n  if (!service) {\n    service = await esbuild.startService({\n      worker: true,\n      wasmURL: \"https://unpkg.com/esbuild-wasm@0.8.27/esbuild.wasm\",\n    });\n  }\n  const result = await service.build({\n    entryPoints: [\"index.js\"],\n    bundle: true,\n    write: false,\n    plugins: [unpkgPathPlugin(), fetchPlugin(rawCode)],\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n      global: \"window\",\n    },\n  });\n\n  return result.outputFiles[0].text;\n};\n\nexport default bundle;\n"],"mappings":"AAAA,OAAO,KAAKA,OAAO,MAAM,cAAc;AACvC,SAASC,eAAe,QAAQ,2BAA2B;AAC3D,SAASC,WAAW,QAAQ,uBAAuB;AAEnD,IAAIC,OAAwB;AAC5B,MAAMC,MAAM,GAAG,MAAOC,OAAe,IAAK;EACxC,IAAI,CAACF,OAAO,EAAE;IACZA,OAAO,GAAG,MAAMH,OAAO,CAACM,YAAY,CAAC;MACnCC,MAAM,EAAE,IAAI;MACZC,OAAO,EAAE;IACX,CAAC,CAAC;EACJ;EACA,MAAMC,MAAM,GAAG,MAAMN,OAAO,CAACO,KAAK,CAAC;IACjCC,WAAW,EAAE,CAAC,UAAU,CAAC;IACzBP,MAAM,EAAE,IAAI;IACZQ,KAAK,EAAE,KAAK;IACZC,OAAO,EAAE,CAACZ,eAAe,EAAE,EAAEC,WAAW,CAACG,OAAO,CAAC,CAAC;IAClDS,MAAM,EAAE;MACN,sBAAsB,EAAE,cAAc;MACtCC,MAAM,EAAE;IACV;EACF,CAAC,CAAC;EAEF,OAAON,MAAM,CAACO,WAAW,CAAC,CAAC,CAAC,CAACC,IAAI;AACnC,CAAC;AAED,eAAeb,MAAM"},"metadata":{},"sourceType":"module"}