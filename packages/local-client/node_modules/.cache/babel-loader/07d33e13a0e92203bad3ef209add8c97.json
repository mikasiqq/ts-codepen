{"ast":null,"code":"import _slicedToArray from\"/Users/gleb/Desktop/study/react/ts-prod/ts-codepen/packages/local-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import MDEditor from\"@uiw/react-md-editor\";import\"./TextEditor.css\";import{useEffect,useRef,useState}from\"react\";import{useActions}from\"../../hooks/useActions\";import{jsx as _jsx}from\"react/jsx-runtime\";var TextEditor=function TextEditor(_ref){var cell=_ref.cell;var editorRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useActions=useActions(),updateCell=_useActions.updateCell;useEffect(function(){var listener=function listener(event){if(editorRef.current&&event.target&&editorRef.current.contains(event.target)){return;}setEditing(false);};document.addEventListener(\"click\",listener,{capture:true});return function(){document.removeEventListener(\"click\",listener,{capture:true});};},[]);if(editing){return/*#__PURE__*/_jsx(\"div\",{className:\"textEditor\",ref:editorRef,children:/*#__PURE__*/_jsx(MDEditor,{value:cell.content,onChange:function onChange(v){return updateCell(cell.id,v||\"\");}})});}return/*#__PURE__*/_jsx(\"div\",{className:\"textEditor card\",onClick:function onClick(){return setEditing(true);},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-content\",children:/*#__PURE__*/_jsx(MDEditor.Markdown,{source:cell.content||\"Нажмите для редактирования ;)\"})})});};export default TextEditor;","map":{"version":3,"names":["MDEditor","useEffect","useRef","useState","useActions","TextEditor","cell","editorRef","editing","setEditing","updateCell","listener","event","current","target","contains","document","addEventListener","capture","removeEventListener","content","v","id"],"sources":["/Users/gleb/Desktop/study/react/ts-prod/ts-codepen/packages/local-client/src/components/TextEditor/TextEditor.tsx"],"sourcesContent":["import MDEditor from \"@uiw/react-md-editor\";\nimport \"./TextEditor.css\";\nimport { FC, useEffect, useRef, useState } from \"react\";\nimport { Cell } from \"../../store/cell\";\nimport { useActions } from \"../../hooks/useActions\";\n\ninterface TextEditorProps {\n  cell: Cell;\n}\n\nconst TextEditor: FC<TextEditorProps> = ({ cell }) => {\n  const editorRef = useRef<HTMLDivElement | null>(null);\n  const [editing, setEditing] = useState(false);\n  const { updateCell } = useActions();\n\n  useEffect(() => {\n    const listener = (event: MouseEvent) => {\n      if (\n        editorRef.current &&\n        event.target &&\n        editorRef.current.contains(event.target as Node)\n      ) {\n        return;\n      }\n      setEditing(false);\n    };\n    document.addEventListener(\"click\", listener, { capture: true });\n\n    return () => {\n      document.removeEventListener(\"click\", listener, { capture: true });\n    };\n  }, []);\n\n  if (editing) {\n    return (\n      <div className=\"textEditor\" ref={editorRef}>\n        <MDEditor\n          value={cell.content}\n          onChange={(v) => updateCell(cell.id, v || \"\")}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"textEditor card\" onClick={() => setEditing(true)}>\n      <div className=\"card-content\">\n        <MDEditor.Markdown\n          source={cell.content || \"Нажмите для редактирования ;)\"}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default TextEditor;\n"],"mappings":"8JAAA,MAAOA,SAAQ,KAAM,sBAAsB,CAC3C,MAAO,kBAAkB,CACzB,OAAaC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAEvD,OAASC,UAAU,KAAQ,wBAAwB,CAAC,2CAMpD,GAAMC,WAA+B,CAAG,QAAlCA,WAA+B,MAAiB,IAAXC,KAAI,MAAJA,IAAI,CAC7C,GAAMC,UAAS,CAAGL,MAAM,CAAwB,IAAI,CAAC,CACrD,cAA8BC,QAAQ,CAAC,KAAK,CAAC,wCAAtCK,OAAO,eAAEC,UAAU,eAC1B,gBAAuBL,UAAU,EAAE,CAA3BM,UAAU,aAAVA,UAAU,CAElBT,SAAS,CAAC,UAAM,CACd,GAAMU,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,KAAiB,CAAK,CACtC,GACEL,SAAS,CAACM,OAAO,EACjBD,KAAK,CAACE,MAAM,EACZP,SAAS,CAACM,OAAO,CAACE,QAAQ,CAACH,KAAK,CAACE,MAAM,CAAS,CAChD,CACA,OACF,CACAL,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CACDO,QAAQ,CAACC,gBAAgB,CAAC,OAAO,CAAEN,QAAQ,CAAE,CAAEO,OAAO,CAAE,IAAK,CAAC,CAAC,CAE/D,MAAO,WAAM,CACXF,QAAQ,CAACG,mBAAmB,CAAC,OAAO,CAAER,QAAQ,CAAE,CAAEO,OAAO,CAAE,IAAK,CAAC,CAAC,CACpE,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIV,OAAO,CAAE,CACX,mBACE,YAAK,SAAS,CAAC,YAAY,CAAC,GAAG,CAAED,SAAU,uBACzC,KAAC,QAAQ,EACP,KAAK,CAAED,IAAI,CAACc,OAAQ,CACpB,QAAQ,CAAE,kBAACC,CAAC,QAAKX,WAAU,CAACJ,IAAI,CAACgB,EAAE,CAAED,CAAC,EAAI,EAAE,CAAC,EAAC,EAC9C,EACE,CAEV,CAEA,mBACE,YAAK,SAAS,CAAC,iBAAiB,CAAC,OAAO,CAAE,yBAAMZ,WAAU,CAAC,IAAI,CAAC,EAAC,uBAC/D,YAAK,SAAS,CAAC,cAAc,uBAC3B,KAAC,QAAQ,CAAC,QAAQ,EAChB,MAAM,CAAEH,IAAI,CAACc,OAAO,EAAI,+BAAgC,EACxD,EACE,EACF,CAEV,CAAC,CAED,cAAef,WAAU"},"metadata":{},"sourceType":"module"}